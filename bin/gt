#!/usr/bin/env php
<?php
namespace Gt\Installer;

use Gt\Cli\Argument\ArgumentList;
use Gt\Installer\Command\BuildCommand;
use Gt\Installer\Command\CreateCommand;
use Gt\Installer\Command\CronCommand;
use Gt\Installer\Command\RunCommand;
use Gt\Installer\Command\ServeCommand;

$autoloadLocations = [
	implode(DIRECTORY_SEPARATOR, [
		__DIR__,
		"..",
		"..",
		"..",
		"autoload.php",
	]),
	implode(DIRECTORY_SEPARATOR, [
		__DIR__,
		"..",
		"vendor",
		"autoload.php",
	]),
];

foreach($autoloadLocations as $location) {
	if(file_exists($location)) {
		require($location);
		break;
	}
}

$app = new \Gt\Cli\Application(
	"PHP.Gt Command Line Interface",
	new ArgumentList(...$argv),
	new CreateCommand(),
	new RunCommand(),
	new BuildCommand(),
	new CronCommand(),
	new ServeCommand()
);
$app->run();